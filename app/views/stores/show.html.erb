<div class="max-w-7xl mx-auto px-4 pb-8">
  <!-- Store Header Section -->
  <div class="bg-gradient-to-r from-indigo-600 to-purple-600 py-8">
    <div class="container mx-auto px-4">
      <h1 class="text-3xl font-bold text-white text-center"><%= @store.name %></h1>
      <div class="h-1 w-24 bg-white rounded mt-2 mx-auto"></div>
    </div>
  </div>
  <!-- Store Image Section -->
  <div class="container mx-auto px-4 -mt-8 mb-8">
    <div class="max-w-md mx-auto">
      <%= turbo_frame_tag "store_image", src: store_store_image_path(@store, 1), class: "block" do %>
        <%= render SkeletonLoaderComponent.new(count: 1, variant: "card") %>
      <% end %>
    </div>
  </div>
  <!-- Tab Control -->
  <div class="container mx-auto px-4 mb-12" data-controller="tabs">
    <!-- Tab Navigation -->
    <div class="border-b border-gray-200 mb-6">
      <nav class="-mb-px flex justify-center space-x-8" aria-label="Tabs">
        <%= render TooltipComponent.new(tooltip_text: "Products and services are loaded via turbo_frames, enabling easy loading visuals and encapsulation of logic. Tabbing behavior controlled via Stimulus") do %>
          <button
            data-tabs-target="tab"
            data-action="tabs#change"
            class="
              cursor-pointer border-transparent text-gray-500 hover:text-gray-700
              hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg
            "
            aria-selected="false"
          >
            Products
          </button>
          <button
            data-tabs-target="tab"
            data-action="tabs#change"
            class="
              cursor-pointer border-transparent text-gray-500 hover:text-gray-700
              hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg
            "
            aria-selected="false"
          >
            Services
          </button>
        <% end %>
      </nav>
    </div>
    <!-- Tab Panels -->
    <div data-tabs-target="panel">
      <%= turbo_frame_tag "store_products", src: store_products_path(@store) do %>
        <div
          class="
            grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6
            justify-items-center
          "
        >
          <%= render SkeletonLoaderComponent.new(count: 6, variant: "card") %>
        </div>
      <% end %>
    </div>

    <div data-tabs-target="panel" class="hidden">
      <%= turbo_frame_tag "store_services", src: store_services_path(@store) do %>
        <div
          class="
            grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6
            justify-items-center
          "
        >
          <%= render SkeletonLoaderComponent.new(count: 6, variant: "card") %>
        </div>
      <% end %>
    </div>
  </div>
  <!-- Reviews Section -->
  <% if current_user %>
    <%= render "store_reviews/add_review_button", store: @store %>
  <% end %>

  <div class="container mx-auto px-4">
    <div class="mb-6 flex flex-col items-center">
      <%= render TooltipComponent.new(tooltip_text: "Reviews are loaded via turbo_frames, enabling easy loading visuals and encapsulation of logic") do %>
        <h1 class="text-xl font-bold text-gray-800 mb-2">Store Reviews</h1>
        <div class="h-1 w-24 bg-indigo-600 rounded"></div>
      <% end %>
    </div>
  </div>
  <%= turbo_frame_tag "store_reviews", src: store_store_reviews_path(@store) do %>
    <div class="container mx-auto px-4">
      <div class="flex justify-center items-center py-8">
        <div
          class="
            animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600
          "
        ></div>
        <span class="ml-3 text-gray-600">Loading reviews...</span>
      </div>
    </div>
  <% end %>
</div>
